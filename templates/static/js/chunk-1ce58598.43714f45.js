(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ce58598"],{"0062":function(s,t,a){"use strict";a.r(t);var i=function(){var s=this,t=s._self._c;return t("div",[t("a-modal",{attrs:{confirmLoading:s.loading,maskClosable:!1,width:800},on:{cancel:s.cancel,ok:s.confirm},model:{value:s.visible,callback:function(t){s.visible=t},expression:"visible"}},[t("div",{attrs:{slot:"title"},slot:"title"},[s._v("采购订单")]),t("div",{staticClass:"modal-body"},[t("h3",[s._v("基本信息")]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购单ID:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.id))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购单号:")]),s.form.purchase_id?t("a-input",{staticStyle:{width:"200px"},model:{value:s.form.purchase_id,callback:function(t){s.$set(s.form,"purchase_id",t)},expression:"form.purchase_id"}}):t("span",{staticClass:"value"},[s._v(s._s(s.form.purchase_id))])],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("运营咨询中:")]),t("a-radio-group",{model:{value:s.form.is_error,callback:function(t){s.$set(s.form,"is_error",t)},expression:"form.is_error"}},[t("a-radio",{attrs:{value:!0}},[s._v("是")]),t("a-radio",{attrs:{value:!1}},[s._v("否")])],1)],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label",staticStyle:{width:"71px"}},[s._v("国内运单号:")]),t("div",s._l(s.posting_numbers,(function(a,i){return t("div",{key:s.link+i},[t("span",[s._v("运单号"+s._s(i+1)+"号：")]),t("a-input",{staticStyle:{width:"200px","margin-right":"10px"},model:{value:s.posting_numbers[i].value,callback:function(t){s.$set(s.posting_numbers[i],"value",t)},expression:"posting_numbers[index].value"}}),t("a-select",{staticStyle:{width:"100px","margin-right":"10px"},attrs:{placeholder:"请选择"},model:{value:s.posting_numbers[i].signed,callback:function(t){s.$set(s.posting_numbers[i],"signed",t)},expression:"posting_numbers[index].signed"}},s._l(s.signed,(function(a){return t("a-select-option",{key:a,attrs:{value:a}},[s._v(s._s(a))])})),1),t("a-button",{attrs:{type:"danger",icon:"delete",size:"small"},on:{click:function(t){return s.delPostingNumbers(i)}}},[s._v("删除")])],1)})),0)]),t("a-button",{attrs:{icon:"edit",size:"small"},on:{click:s.addPostingNumbers}},[s._v("新增国内运单号")])],1),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("待采购量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.wait_for_purchase_quantity))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("在篮量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.in_basket_quantity))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("在途量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.in_transit_quantity))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("库存量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.stock_quantity))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("出库量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.out_stock_quantity))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("丢失量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.loss_quantity))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购价格:")]),t("a-input",{staticStyle:{width:"100px"},model:{value:s.form.price,callback:function(t){s.$set(s.form,"price",t)},expression:"form.price"}})],1),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("运费:")]),t("a-input",{staticStyle:{width:"100px"},model:{value:s.form.shipping_fee,callback:function(t){s.$set(s.form,"shipping_fee",t)},expression:"form.shipping_fee"}})],1),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("退货费用:")]),t("a-input",{staticStyle:{width:"100px"},model:{value:s.form.back_fee,callback:function(t){s.$set(s.form,"back_fee",t)},expression:"form.back_fee"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("物流状态:")]),t("a-input",{staticStyle:{width:"535px"},model:{value:s.form.logistics_status,callback:function(t){s.$set(s.form,"logistics_status",t)},expression:"form.logistics_status"}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购平台:")]),t("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:s.form.purchase_platform,callback:function(t){s.$set(s.form,"purchase_platform",t)},expression:"form.purchase_platform"}},s._l(s.options,(function(a){return t("a-select-option",{key:a,attrs:{value:a}},[s._v(s._s(a))])})),1)],1),t("div",{staticClass:"columns"},[t("span",{staticClass:"label",staticStyle:{width:"115px"}},[s._v("采购状态:")]),t("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:s.form.status,callback:function(t){s.$set(s.form,"status",t)},expression:"form.status"}},s._l(s.options_status,(function(a){return t("a-select-option",{key:a,attrs:{value:a}},[s._v(s._s(a))])})),1)],1)]),t("div",[t("h3",{staticStyle:{"margin-top":"10px"}},[s._v("关系统内商品信息")]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:s.form.system_product.primary_image,alt:"产品主图"}})])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("商品ID:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.id))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("系统sku:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.system_sku))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("参考重量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.reference_weight))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("参考价格:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.reference_cost))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购链接:")]),t("div",s._l(JSON.parse(s.form.system_product.purchase_link),(function(a,i){return t("div",{key:i+100},[t("span",[s._v(s._s(i+1)+"：")]),t("a",{attrs:{href:a.link,target:"_blank"}},[s._v(" "+s._s(`链接${i+1}号`)+" ")]),t("span",[s._v(" "+s._s(a.msg)+" ")])])})),0)])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购平台:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.purchase_platform))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("供应商名称:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.supplier_name))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("待采购量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.wait_for_purchase_quantity))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("在篮量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.in_basket_quantity))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("在途量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.in_transit_quantity))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("库存量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.stock_quantity))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("出库量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.out_stock_quantity))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("丢失量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.loss_quantity))])])])]),t("div",[t("h3",{staticStyle:{"margin-top":"10px"}},[s._v("采购商品信息")]),s._l(s.form.purchase_products,(function(a,i){return t("div",{key:a.id,staticStyle:{display:"flex","align-items":"center"}},[t("span",{staticStyle:{"margin-right":"8px"}},[s._v(s._s(i+1)+".")]),t("div",{staticStyle:{"margin-top":"5px",border:"1px solid black"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购商品ID:")]),t("span",{staticClass:"value"},[s._v(s._s(a.id))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购商品sku:")]),t("span",{staticClass:"value"},[s._v(s._s(a.sku))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购价格:")]),t("span",{staticClass:"value"},[s._v(s._s(a.price))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购类型:")]),t("span",{staticClass:"value"},[s._v(s._s(a.type))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购状态:")]),t("span",{staticClass:"value"},[s._v(s._s(a.status))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("创建时间:")]),t("span",{staticClass:"value"},[s._v(s._s(a.create_time))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("入库时间:")]),t("span",{staticClass:"value"},[s._v(s._s(a.stock_in_date))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购单ID:")]),t("span",{staticClass:"value"},[s._v(s._s(a.purchase_order_id))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("系统内商品ID:")]),t("span",{staticClass:"value"},[s._v(s._s(a.system_product_id))])])])])])}))],2),t("div",[t("h3",[s._v("留言")]),t("div",{staticClass:"msg_area",staticStyle:{width:"98%",padding:"5px",border:"1px solid black",height:"400px",overflow:"auto","margin-bottom":"20px"}},s._l(JSON.parse(s.form.error_words),(function(a,i){return t("div",{key:i+100,staticStyle:{display:"flex","flex-direction":"column","margin-bottom":"10px"}},[t("div",{staticStyle:{"margin-right":"10px"}},[s._v(s._s(`${a.date} ${a.username} (${a.role})`)+":")]),"word"==a.type?t("div",[t("div",[s._v(s._s(a.content))])]):"picture"==a.type?t("div",[t("img",{staticStyle:{width:"100px",cursor:"pointer"},attrs:{src:s.url+a.content,alt:"图片"},on:{click:function(t){return s.enlargeImage(s.url+a.content)}}})]):s._e()])})),0),t("div",{staticClass:"input_area"},[t("a-input",{staticStyle:{width:"535px"},attrs:{"aria-placeholder":"请输入异常信息..."},model:{value:s.msg,callback:function(t){s.msg=t},expression:"msg"}}),t("a-button",{staticStyle:{margin:"0 10px"},attrs:{icon:"edit",size:"small"},on:{click:s.add_msg}},[s._v("发送")]),t("a-button",{attrs:{icon:"edit",size:"small"},on:{click:s.triggerFileInput}},[s._v("图片上传")]),t("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:s.add_pic}})],1)])])]),t("a-modal",{style:{textAlign:"center"},attrs:{width:800},on:{cancel:function(t){s.imageModalVisible=!1}},model:{value:s.imageModalVisible,callback:function(t){s.imageModalVisible=t},expression:"imageModalVisible"}},[t("img",{staticStyle:{"max-width":"100%","max-height":"600px"},attrs:{src:s.currentImage,alt:"放大图片"}})])],1)},e=[],l=(a("14d9"),a("f87e")),c=a("f64c"),r=a("01ea"),n={name:"FormModal",props:["visible","form"],model:{prop:"visible",event:"cancel"},data(){return{loading:!1,options:["pdd","1688","线下"],options_status:["待采购","运输中","已完成","有异常","已作废"],posting_numbers:this.form.posting_numbers?JSON.parse(this.form.posting_numbers):[],error_words:this.form.error_words?JSON.parse(this.form.error_words):[],msg:"",signed:["未入库","已入库"],url:r["a"].baseURL,imageModalVisible:!1,currentImage:""}},computed:{username(){return this.$store.state.user.username}},watch:{posting_numbers:{handler(s){this.form.posting_numbers=JSON.stringify(s)},deep:!0},error_words:{handler(s){this.form.error_words=JSON.stringify(s)},deep:!0},visible(s){this.posting_numbers=this.form.posting_numbers?JSON.parse(this.form.posting_numbers):[],this.error_words=this.form.error_words?JSON.parse(this.form.error_words):[]}},methods:{confirm(){console.log(this.form),Object(l["j"])(this.form).then(s=>{c["a"].success(s.msg),this.$emit("update",!1)})},cancel(){this.$emit("cancel",!1)},addPostingNumbers(){this.posting_numbers.push({value:"",signed:"未入库"})},delPostingNumbers(s){this.posting_numbers.splice(s,1)},add_msg(){this.error_words.push({username:this.username,type:"word",content:this.msg,date:this.formatCurrentTime(),role:"采购"}),this.msg=""},triggerFileInput(){this.$refs.fileInput.click()},add_pic(s){const t=s.target.files[0];if(!t)return;const a=new FormData;a.append("file",t),Object(l["n"])(a).then(s=>{200===s.code?(this.error_words.push({username:this.username,type:"picture",content:s.data.url,date:this.formatCurrentTime(),role:"采购"}),c["a"].success(s.data.msg)):c["a"].error("图片上传失败，请重试！")})},enlargeImage(s){this.currentImage=s,this.imageModalVisible=!0},formatCurrentTime(){const s=new Date,t=s.getFullYear(),a=s.getMonth()+1,i=s.getDate(),e=s.getHours(),l=s.getMinutes(),c=s.getSeconds(),r=s=>s<10?"0"+s:s,n=`${t}年${r(a)}月${r(i)}日 ${r(e)}:${r(l)}:${r(c)}`;return n}},mounted(){}},o=n,u=(a("dc6c"),a("2877")),p=Object(u["a"])(o,i,e,!1,null,"f2b6c4aa",null);t["default"]=p.exports},a745:function(s,t,a){},dc6c:function(s,t,a){"use strict";a("a745")}}]);
//# sourceMappingURL=chunk-1ce58598.43714f45.js.map