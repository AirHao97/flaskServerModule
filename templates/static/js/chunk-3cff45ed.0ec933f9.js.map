{"version":3,"sources":["webpack:///./src/views/finance/purchase_order/index.vue?cf54","webpack:///./src/views/finance/purchase_order/index.vue","webpack:///src/views/finance/purchase_order/index.vue","webpack:///./src/views/finance/purchase_order/index.vue?a6dd","webpack:///./src/views/finance/purchase_order/index.vue?2276","webpack:///./src/api/purchaser.js"],"names":["render","_vm","this","_c","_self","attrs","staticStyle","on","search","model","value","searchForm","keyWord","callback","$$v","$set","expression","_v","status","_l","options_status","option","key","_s","purchase_platform","options_platform","columns","items","loading","pagination","tableChange","scopedSlots","_u","fn","text","record","JSON","parse","posting_numbers","postting_number","index","signed","system_product","system_sku","stock_quantity","omitted_quantity","in_transit_quantity","supplier_name","_e","purchase_link","link","item","$event","openFormModal","targetItem","update","visible","staticRenderFns","name","components","FormModal","data","title","dataIndex","customRender","width","start","limit","current","total","pageSize","form","importLoading","watch","newValue","oldValue","position","list","computed","methods","initialize","getPurchaseOrderData","then","count","finally","filters","sorter","getDataWithSupplier","mounted","component","params","request","url","method","getWaitForPurchaseOrderSupplier","getDataInPurchaseMode","upDatePurchaseOrder","modifyData","operationModifyData","fillThePurchaseIdForPurchaseOrders","fillThePurchaseIdForPurchaseOrder","cancleThePurchaseOrder","updatePurchaseOrdersIn1688WithAPI","buyPurchaseProductIn1688WithAPI","uploadImage","headers","getPurchaseProductData","addPurchaseProduct"],"mappings":"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","file":"static/js/chunk-3cff45ed.0ec933f9.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=06f43c5c&prod&scoped=true&lang=css\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('a-card',{attrs:{\"title\":\"采购订单管理\"}},[_c('a-row',{attrs:{\"gutter\":16}},[_c('a-col',{staticStyle:{\"max-width\":\"200px\",\"margin-bottom\":\"12px\"},attrs:{\"span\":24}},[_c('a-input',{attrs:{\"placeholder\":\"关键字查询..\",\"allowClear\":\"\"},on:{\"pressEnter\":_vm.search},model:{value:(_vm.searchForm.keyWord),callback:function ($$v) {_vm.$set(_vm.searchForm, \"keyWord\", $$v)},expression:\"searchForm.keyWord\"}})],1),_c('a-col',{staticStyle:{\"width\":\"100px\",\"margin-bottom\":\"12px\"},attrs:{\"span\":24}},[_c('a-button',{attrs:{\"type\":\"primary\",\"icon\":\"search\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")])],1),_c('a-col',{staticStyle:{\"max-width\":\"200px\",\"margin-bottom\":\"12px\",\"margin-right\":\"10px\"},attrs:{\"span\":24}},[_c('a-select',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.searchForm.status),callback:function ($$v) {_vm.$set(_vm.searchForm, \"status\", $$v)},expression:\"searchForm.status\"}},_vm._l((_vm.options_status),function(option){return _c('a-select-option',{key:option,attrs:{\"value\":option}},[_vm._v(_vm._s(option))])}),1)],1),_c('a-col',{staticStyle:{\"max-width\":\"200px\",\"margin-bottom\":\"12px\",\"margin-right\":\"10px\"},attrs:{\"span\":24}},[_c('a-select',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.searchForm.purchase_platform),callback:function ($$v) {_vm.$set(_vm.searchForm, \"purchase_platform\", $$v)},expression:\"searchForm.purchase_platform\"}},_vm._l((_vm.options_platform),function(option){return _c('a-select-option',{key:option,attrs:{\"value\":option}},[_vm._v(_vm._s(option))])}),1)],1)],1),_c('a-row',{staticStyle:{\"margin-top\":\"12px\"}},[_c('a-table',{attrs:{\"size\":\"small\",\"columns\":_vm.columns,\"dataSource\":_vm.items,\"rowKey\":\"id\",\"loading\":_vm.loading,\"pagination\":_vm.pagination},on:{\"change\":_vm.tableChange},scopedSlots:_vm._u([{key:\"posting_numbers\",fn:function(text, record){return _c('div',{},_vm._l((JSON.parse(record.posting_numbers)),function(postting_number,index){return _c('div',{key:index+100},[_c('span',{staticStyle:{\"font-weight\":\"700\"}},[_vm._v(_vm._s(index+1)+\".\")]),_c('span',{staticStyle:{\"color\":\"green\"}},[_vm._v(\" \"+_vm._s(postting_number.value)+\" \")]),_c('span',{staticStyle:{\"margin-left\":\"20px\",\"font-weight\":\"700\"}},[_vm._v(\"状态：\")]),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\" \"+_vm._s(postting_number.signed)+\" \")]),_c('hr',{staticStyle:{\"margin-top\":\"0\"}})])}),0)}},{key:\"system_product\",fn:function(text, record){return _c('div',{},[(record.system_product)?_c('div',[_c('span',[_vm._v(\" SKU: \")]),_vm._v(\" \"),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\" \"+_vm._s(record.system_product.system_sku)+\" \")]),_c('span',[_vm._v(\" 库存量: \")]),_vm._v(\" \"),_c('span',{staticStyle:{\"color\":\"green\"}},[_vm._v(_vm._s(record.system_product.stock_quantity))]),_c('span',[_vm._v(\" 缺货量: \")]),_vm._v(\" \"),_c('span',{staticStyle:{\"color\":\"green\"}},[_vm._v(_vm._s(record.system_product.omitted_quantity))]),_c('span',[_vm._v(\" 在途量: \")]),_vm._v(\" \"),_c('span',{staticStyle:{\"color\":\"green\"}},[_vm._v(_vm._s(record.system_product.in_transit_quantity))]),_c('span',[_vm._v(\" 供应商: \")]),_vm._v(\" \"),_c('span',{staticStyle:{\"color\":\"green\"}},[_vm._v(_vm._s(record.system_product.supplier_name))])]):_vm._e()])}},{key:\"system_product.purchase_link\",fn:function(text, record){return _c('div',{},[_c('div',_vm._l((JSON.parse(record.system_product.purchase_link)),function(link,index){return _c('div',{key:index+100},[_c('span',[_vm._v(\" \"+_vm._s(index+1)+\". \")]),_c('a',{attrs:{\"href\":link,\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(link)+\" \")]),_c('hr')])}),0)])}},{key:\"action\",fn:function(value, item){return _c('div',{},[_c('a-button-group',[_c('a-button',{attrs:{\"icon\":\"edit\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.openFormModal(item)}}},[_vm._v(\"查看\")])],1)],1)}}])})],1)],1),_c('form-modal',{attrs:{\"form\":_vm.targetItem},on:{\"update\":_vm.update},model:{value:(_vm.visible),callback:function ($$v) {_vm.visible=$$v},expression:\"visible\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <a-card title=\"采购订单管理\">\r\n      <a-row :gutter=\"16\">\r\n        <a-col :span=\"24\" style=\"max-width: 200px; margin-bottom: 12px;\">\r\n          <a-input v-model=\"searchForm.keyWord\" placeholder=\"关键字查询..\" allowClear @pressEnter=\"search\" />\r\n        </a-col>\r\n\r\n        <a-col :span=\"24\" style=\"width: 100px; margin-bottom: 12px;\">\r\n          <a-button type=\"primary\" icon=\"search\" @click=\"search\">查询</a-button>\r\n        </a-col>\r\n\r\n        <a-col :span=\"24\" style=\"max-width: 200px; margin-bottom: 12px; margin-right: 10px;\">\r\n          <a-select v-model=\"searchForm.status\" placeholder=\"请选择\" style=\"width: 200px;\"> \r\n            <a-select-option v-for=\"option in options_status\" :value=\"option\" :key=\"option\">{{ option }}</a-select-option> \r\n          </a-select>\r\n        </a-col>\r\n\r\n        <a-col :span=\"24\" style=\"max-width: 200px; margin-bottom: 12px; margin-right: 10px;\">\r\n          <a-select v-model=\"searchForm.purchase_platform\" placeholder=\"请选择\" style=\"width: 200px;\"> \r\n            <a-select-option v-for=\"option in options_platform\" :value=\"option\" :key=\"option\">{{ option }}</a-select-option> \r\n          </a-select>\r\n        </a-col>\r\n      </a-row>\r\n\r\n\r\n      <a-row style=\"margin-top: 12px;\">\r\n        <a-table size=\"small\" :columns=\"columns\" :dataSource=\"items\" rowKey=\"id\" :loading=\"loading\" :pagination=\"pagination\" @change=\"tableChange\">\r\n          <div slot=\"posting_numbers\" slot-scope=\"text, record\">\r\n            <div v-for=\" postting_number,index in JSON.parse(record.posting_numbers)\" :key=\"index+100\">\r\n              <span style=\"font-weight: 700;\">{{ index+1 }}.</span>\r\n              <span style=\"color:green\"> {{ postting_number.value }} </span>\r\n              <span style=\"margin-left:20px; font-weight: 700;\">状态：</span>\r\n              <span style=\"color:red\"> {{ postting_number.signed }} </span>\r\n              <hr style=\"margin-top: 0;\">\r\n            </div>\r\n          </div>\r\n\r\n          <div slot=\"system_product\" slot-scope=\"text, record\">\r\n            <div v-if=\"record.system_product\">\r\n              <span> SKU: </span> <span style=\"color: red;\"> {{ record.system_product.system_sku }} </span> \r\n              <span> 库存量: </span> <span style=\"color: green;\">{{ record.system_product.stock_quantity }}</span> \r\n              <span> 缺货量: </span> <span style=\"color: green;\">{{ record.system_product.omitted_quantity }}</span> \r\n              <span> 在途量: </span> <span style=\"color: green;\">{{ record.system_product.in_transit_quantity }}</span>\r\n              <span> 供应商: </span> <span style=\"color: green;\">{{ record.system_product.supplier_name }}</span>  \r\n            </div>\r\n          </div>\r\n\r\n          <div slot=\"system_product.purchase_link\" slot-scope=\"text, record\">\r\n            <div>\r\n              <div v-for=\" link,index in JSON.parse(record.system_product.purchase_link)\" :key=\"index+100\">\r\n                <span> {{ index+1 }}. </span>\r\n                <a :href=\"link\" target=\"_blank\"> {{ link }} </a>\r\n                <hr>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div slot=\"action\" slot-scope=\"value, item\">\r\n            <a-button-group>\r\n              <a-button icon=\"edit\" size=\"small\" @click=\"openFormModal(item)\">查看</a-button>\r\n            </a-button-group>\r\n          </div>\r\n        </a-table>\r\n      </a-row>\r\n    </a-card>\r\n    <form-modal v-model=\"visible\" :form=\"targetItem\" @update=\"update\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {getPurchaseOrderData, getWaitForPurchaseOrderSupplier, getDataInPurchaseMode, upDatePurchaseOrder, fillThePostingNumber, cancleThePurchaseOrder } from '@/api/purchaser'\r\nimport { message } from \"ant-design-vue\";\r\n\r\nexport default {\r\n  name: 'Warehouse',\r\n  components: {\r\n    FormModal: () => import('./FormModal.vue'),\r\n  },\r\n  data() {\r\n    return {\r\n      columns: [\r\n        {\r\n          title: '采购单ID',\r\n          dataIndex: 'id',\r\n        },\r\n        {\r\n          title: '采购单号',\r\n          dataIndex: 'purchase_id',\r\n        },\r\n        {\r\n          title: '国内运单号',\r\n          dataIndex: 'posting_numbers',\r\n          scopedSlots: { customRender: 'posting_numbers' },\r\n          width: 200\r\n        },\r\n        {\r\n          title: '商品数量',\r\n          dataIndex: 'quantity',\r\n        },\r\n        {\r\n          title: '已签收数量',\r\n          dataIndex: 'quantity_stock_in',\r\n        },\r\n        {\r\n          title: '采购价格',\r\n          dataIndex: 'price',\r\n        },\r\n        {\r\n          title: '物流状态',\r\n          dataIndex: 'logistics_status',\r\n        },\r\n        {\r\n          title: '采购平台',\r\n          dataIndex: 'purchase_platform',\r\n        },\r\n        {\r\n          title: '采购状态',\r\n          dataIndex: 'status',\r\n        },\r\n        {\r\n          title: '系统内商品',\r\n          dataIndex: 'system_product',\r\n          scopedSlots: { customRender: 'system_product' },\r\n          width: 200,\r\n        },\r\n        {\r\n          title: '采购链接',\r\n          dataIndex: 'system_product.purchase_link',\r\n          scopedSlots: { customRender: 'system_product.purchase_link' },\r\n        },\r\n        {\r\n          title: '操作',\r\n          dataIndex: 'action',\r\n          scopedSlots: { customRender: 'action' },\r\n          width: '156px'\r\n        },\r\n      ],\r\n      \r\n      searchForm: { start: 0, limit: 15, keyWord: \"\", status:\"全部\", purchase_platform:\"1688\", supplier_name:\"\"},\r\n      pagination: { current: 1, total: 0, pageSize: 15 },\r\n\r\n      loading: false,\r\n      items: [],\r\n\r\n      visible: false,\r\n      targetItem: {},\r\n      form: {},\r\n      importLoading: false,\r\n      options_status:[\"全部\",\"待采购\",\"运输中\",\"已完成\",\"有异常\",\"已作废\"],\r\n      options_platform:[\"1688\",\"pdd\",\"线下\"],\r\n\r\n    };\r\n  },\r\n  watch:{\r\n    'searchForm.purchase_platform'(newValue,oldValue){\r\n      this.loading = true;\r\n      this.pagination =  {current: 1, total: 0, pageSize: 15, position:\"bottom\" }\r\n      this.list()\r\n    },\r\n    'searchForm.status'(newValue,oldValue){\r\n      this.loading = true;\r\n      this.pagination =  {current: 1, total: 0, pageSize: 15, position:\"bottom\" }\r\n      this.list()\r\n    },\r\n  },\r\n  computed: {\r\n  },\r\n  methods: {\r\n    initialize() {\r\n      this.list();\r\n    },\r\n    list() {\r\n      this.loading = true;\r\n      getPurchaseOrderData(this.searchForm).then(data => {\r\n        this.pagination.total = data.data.count;\r\n        this.items = data.data.data;\r\n      }).finally(() => {\r\n        this.loading = false;\r\n      });\r\n    },\r\n    update() {\r\n      this.visible = false\r\n      this.list();\r\n    },\r\n    search() {\r\n      this.searchForm.start = 0;\r\n      this.pagination.current = 1;\r\n      this.list();\r\n    },\r\n    openFormModal(item) {\r\n      this.targetItem = { ...item };\r\n      this.visible = true;\r\n    },\r\n\r\n    tableChange(pagination, filters, sorter) {      \r\n      this.searchForm.start = (pagination.current-1)*this.pagination.pageSize;\r\n      this.pagination.current = pagination.current;\r\n      this.list();\r\n    },\r\n    getDataWithSupplier(item){\r\n      this.searchForm.supplier_name = item\r\n      this.list()\r\n    },\r\n  },\r\n  mounted() {\r\n    this.initialize();\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.selected-supplier {\r\n  background-color: #40a9ff !important; /* 选中时的背景颜色 */\r\n  border-color: #40a9ff !important;\r\n  color: white !important;\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=06f43c5c&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=06f43c5c&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06f43c5c\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request';\r\n\r\n// 审阅模式获取采购订单\r\nexport function getPurchaseOrderData(params) {\r\n  return request({ url: `/purchase_order/getData`, method: 'get', params })\r\n}\r\n\r\n// 批量采购模式 获取待采购产品供应商列表\r\nexport function getWaitForPurchaseOrderSupplier(params) {\r\n  return request({ url: `/purchase_order/getWaitForPurchaseOrderSupplier`, method: 'get', params })\r\n}\r\n\r\n// 批量采购模式 根据 平台、供应商 获取采购订单数据\r\nexport function getDataInPurchaseMode(params) {\r\n  return request({ url: `/purchase_order/getDataInPurchaseMode`, method: 'get', params })\r\n}\r\n\r\n// 根据ozon订单信息更新采购订单\r\nexport function upDatePurchaseOrder(data) {\r\n  return request({ url: `/purchase_order/updateData`, method: 'post', data })\r\n}\r\n\r\n// 手动修改采购单信息\r\nexport function modifyData(data) {\r\n  return request({ url: `/purchase_order/modifyData`, method: 'post', data })\r\n}\r\n\r\n// 运营手动修改采购单信息（回复留言） \r\nexport function operationModifyData(data) {\r\n  return request({ url: `/purchase_order/operationModifyData`, method: 'post', data })\r\n}\r\n\r\n\r\n// 批量给采购单 填写国内运单号\r\nexport function fillThePurchaseIdForPurchaseOrders(data) {\r\n  return request({ url: `/purchase_order/fillThePurchaseIdForPurchaseOrders`, method: 'post', data })\r\n}\r\n\r\n// 给采购单 填写订单号\r\nexport function fillThePurchaseIdForPurchaseOrder(data) {\r\n  return request({ url: `/purchase_order/fillThePurchaseIdForPurchaseOrder`, method: 'post', data })\r\n}\r\n\r\n\r\n// 作废采购单\r\nexport function cancleThePurchaseOrder(data) {\r\n  return request({ url: `/purchase_order/cancleThePurchaseOrder`, method: 'post', data })\r\n}\r\n\r\n// 更新1688订单\r\nexport function updatePurchaseOrdersIn1688WithAPI(data) {\r\n  return request({ url: `/purchase_order/updatePurchaseOrdersIn1688WithAPI`, method: 'post', data })\r\n}\r\n\r\n// 批量下单1688订单 \r\nexport function buyPurchaseProductIn1688WithAPI(data) {\r\n  return request({ url: `/purchase_order/buyPurchaseProductIn1688WithAPI`, method: 'post', data })\r\n}\r\n\r\n// 通过excel更新采购单信息\r\n// 上传 Excel 文件并更新采购单信息\r\nexport function updatePurchaseOrdersWithExcel(file) {\r\n  const formData = new FormData();\r\n  formData.append('file', file);\r\n\r\n  return request({\r\n    url: '/purchase_order/updatePurchaseOrdersWithExcel',\r\n    method: 'post',\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data',\r\n    },\r\n    data: formData,\r\n  });\r\n}\r\n\r\n// 上传图片\r\nexport function uploadImage(data) {\r\n  return request({\r\n    url: `/pic/upload`,\r\n    method: 'post',\r\n    data,\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data',\r\n    },\r\n  });\r\n}\r\n\r\n// ----------------------------- 采购商品 ----------------------------- \r\nexport function getPurchaseProductData(params) {\r\n  return request({ url: `/purchase_product/getData`, method: 'get', params })\r\n}\r\n\r\n// 运营手动修改采购单信息（回复留言） \r\nexport function addPurchaseProduct(data) {\r\n  return request({ url: `/purchase_product/addData`, method: 'post', data })\r\n}\r\n\r\n\r\n"],"sourceRoot":""}