(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-878ac49a"],{"2b12":function(s,t,a){"use strict";a("4a89")},"4a89":function(s,t,a){},"76de":function(s,t,a){"use strict";a.r(t);var i=function(){var s=this,t=s._self._c;return t("div",[t("a-modal",{attrs:{confirmLoading:s.loading,maskClosable:!1,width:800},on:{cancel:s.cancel,ok:s.confirm},model:{value:s.visible,callback:function(t){s.visible=t},expression:"visible"}},[t("div",{attrs:{slot:"title"},slot:"title"},[s._v("采购订单")]),t("div",{staticClass:"modal-body"},[t("h3",[s._v("基本信息")]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购单ID:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.id))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购单号:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.purchase_id))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("运营咨询中:")]),t("span",{staticClass:"value"},[s._v(s._s(s.is_error?"否":"是"))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label",staticStyle:{width:"80px"}},[s._v("国内运单号:")]),t("div",s._l(s.posting_numbers,(function(a,i){return t("div",{key:s.link+i},[t("span",[s._v("运单号"+s._s(i+1)+"号：")]),t("span",{staticClass:"value"},[s._v(s._s(s.posting_numbers[i].value))]),t("span",{staticClass:"value"},[s._v(s._s(s.posting_numbers[i].signed))])])})),0)])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("待采购量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.wait_for_purchase_quantity))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("在篮量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.in_basket_quantity))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("在途量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.in_transit_quantity))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("库存量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.stock_quantity))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("出库量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.out_stock_quantity))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("丢失量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.loss_quantity))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购价格:")]),t("span",{staticClass:"value"},[s._v(" "+s._s(s.form.price)+" ")])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("物流状态:")]),t("span",{staticClass:"value"},[s._v(" "+s._s(s.form.logistics_status)+" ")])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购平台:")]),t("span",{staticClass:"value"},[s._v(" "+s._s(s.form.purchase_platform)+" ")])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label",staticStyle:{width:"115px"}},[s._v("采购状态:")]),t("span",{staticClass:"value"},[s._v(" "+s._s(s.form.status)+" ")])])]),t("div",[t("h3",{staticStyle:{"margin-top":"10px"}},[s._v("关系统内商品信息")]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:s.form.system_product.primary_image,alt:"产品主图"}})])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("商品ID:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.id))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("系统sku:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.system_sku))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("参考重量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.reference_weight))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("参考价格:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.reference_cost))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购链接:")]),t("div",s._l(JSON.parse(s.form.system_product.purchase_link),(function(a,i){return t("div",{key:i+100},[t("span",[s._v(s._s(i+1)+"：")]),t("a",{attrs:{href:a.link,target:"_blank"}},[s._v(" "+s._s(`链接${i+1}号`)+" ")]),t("span",[s._v(" "+s._s(a.msg)+" ")])])})),0)])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购平台:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.purchase_platform))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("供应商名称:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.supplier_name))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("待采购量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.wait_for_purchase_quantity))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("在篮量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.in_basket_quantity))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("在途量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.in_transit_quantity))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("库存量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.stock_quantity))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("出库量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.out_stock_quantity))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("丢失量:")]),t("span",{staticClass:"value"},[s._v(s._s(s.form.system_product.loss_quantity))])])])]),t("div",[t("h3",{staticStyle:{"margin-top":"10px"}},[s._v("采购商品信息")]),s._l(s.form.purchase_products,(function(a,i){return t("div",{key:a.id,staticStyle:{display:"flex","align-items":"center"}},[t("span",{staticStyle:{"margin-right":"8px"}},[s._v(s._s(i+1)+".")]),t("div",{staticStyle:{"margin-top":"5px",border:"1px solid black"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购商品ID:")]),t("span",{staticClass:"value"},[s._v(s._s(a.id))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购商品sku:")]),t("span",{staticClass:"value"},[s._v(s._s(a.sku))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购价格:")]),t("span",{staticClass:"value"},[s._v(s._s(a.price))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购类型:")]),t("span",{staticClass:"value"},[s._v(s._s(a.type))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购状态:")]),t("span",{staticClass:"value"},[s._v(s._s(a.status))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("创建时间:")]),t("span",{staticClass:"value"},[s._v(s._s(a.create_time))])]),t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("入库时间:")]),t("span",{staticClass:"value"},[s._v(s._s(a.stock_in_date))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("采购单ID:")]),t("span",{staticClass:"value"},[s._v(s._s(a.purchase_order_id))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"columns"},[t("span",{staticClass:"label"},[s._v("系统内商品ID:")]),t("span",{staticClass:"value"},[s._v(s._s(a.system_product_id))])])])])])}))],2),t("div",[t("h3",[s._v("留言")]),t("div",{staticClass:"msg_area",staticStyle:{width:"98%",padding:"5px",border:"1px solid black",height:"400px",overflow:"auto","margin-bottom":"20px"}},s._l(JSON.parse(s.form.error_words),(function(a,i){return t("div",{key:i+100,staticStyle:{display:"flex","flex-direction":"column","margin-bottom":"10px"}},[t("div",{staticStyle:{"margin-right":"10px"}},[s._v(s._s(`${a.date} ${a.username} (${a.role})`)+":")]),"word"==a.type?t("div",[t("div",[s._v(s._s(a.content))])]):"picture"==a.type?t("div",[t("img",{staticStyle:{width:"100px",cursor:"pointer"},attrs:{src:s.url+a.content,alt:"图片"},on:{click:function(t){return s.enlargeImage(s.url+a.content)}}})]):s._e()])})),0),t("div",{staticClass:"input_area"},[t("a-input",{staticStyle:{width:"535px"},attrs:{"aria-placeholder":"请输入异常信息..."},model:{value:s.msg,callback:function(t){s.msg=t},expression:"msg"}}),t("a-button",{staticStyle:{margin:"0 10px"},attrs:{icon:"edit",size:"small"},on:{click:s.add_msg}},[s._v("发送")]),t("a-button",{attrs:{icon:"edit",size:"small"},on:{click:s.triggerFileInput}},[s._v("图片上传")]),t("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:s.add_pic}})],1)])])]),t("a-modal",{style:{textAlign:"center"},attrs:{width:800},on:{cancel:function(t){s.imageModalVisible=!1}},model:{value:s.imageModalVisible,callback:function(t){s.imageModalVisible=t},expression:"imageModalVisible"}},[t("img",{staticStyle:{"max-width":"100%","max-height":"600px"},attrs:{src:s.currentImage,alt:"放大图片"}})])],1)},e=[],r=(a("14d9"),a("f87e")),l=a("f64c"),n=a("01ea"),c={name:"FormModal",props:["visible","form"],model:{prop:"visible",event:"cancel"},data(){return{loading:!1,options:["pdd","1688","线下"],options_status:["待采购","运输中","已完成","有异常","已作废"],posting_numbers:this.form.posting_numbers?JSON.parse(this.form.posting_numbers):[],error_words:this.form.error_words?JSON.parse(this.form.error_words):[],msg:"",signed:["未入库","已入库"],url:n["a"].baseURL,imageModalVisible:!1,currentImage:""}},computed:{username(){return this.$store.state.user.username}},watch:{posting_numbers:{handler(s){this.form.posting_numbers=JSON.stringify(s)},deep:!0},error_words:{handler(s){this.form.error_words=JSON.stringify(s)},deep:!0},visible(s){this.posting_numbers=this.form.posting_numbers?JSON.parse(this.form.posting_numbers):[],this.error_words=this.form.error_words?JSON.parse(this.form.error_words):[]}},methods:{confirm(){console.log(this.form),Object(r["k"])(this.form).then(s=>{l["a"].success(s.msg),this.$emit("update",!1)})},cancel(){this.$emit("cancel",!1)},addPostingNumbers(){this.posting_numbers.push({value:"",signed:"未入库"})},delPostingNumbers(s){this.posting_numbers.splice(s,1)},add_msg(){this.error_words.push({username:this.username,type:"word",content:this.msg,date:this.formatCurrentTime(),role:"运营"}),this.msg=""},triggerFileInput(){this.$refs.fileInput.click()},add_pic(s){const t=s.target.files[0];if(!t)return;const a=new FormData;a.append("file",t),Object(r["n"])(a).then(s=>{200===s.code?(this.error_words.push({username:this.username,type:"picture",content:s.data.url,date:this.formatCurrentTime(),role:"运营"}),l["a"].success(s.data.msg)):l["a"].error("图片上传失败，请重试！")})},enlargeImage(s){this.currentImage=s,this.imageModalVisible=!0},formatCurrentTime(){const s=new Date,t=s.getFullYear(),a=s.getMonth()+1,i=s.getDate(),e=s.getHours(),r=s.getMinutes(),l=s.getSeconds(),n=s=>s<10?"0"+s:s,c=`${t}年${n(a)}月${n(i)}日 ${n(e)}:${n(r)}:${n(l)}`;return c}},mounted(){}},o=c,u=(a("2b12"),a("2877")),d=Object(u["a"])(o,i,e,!1,null,"26e42178",null);t["default"]=d.exports},f87e:function(s,t,a){"use strict";a.d(t,"g",(function(){return e})),a.d(t,"i",(function(){return r})),a.d(t,"f",(function(){return l})),a.d(t,"l",(function(){return n})),a.d(t,"j",(function(){return c})),a.d(t,"k",(function(){return o})),a.d(t,"e",(function(){return u})),a.d(t,"d",(function(){return d})),a.d(t,"c",(function(){return _})),a.d(t,"m",(function(){return p})),a.d(t,"b",(function(){return v})),a.d(t,"n",(function(){return m})),a.d(t,"h",(function(){return C})),a.d(t,"a",(function(){return f}));var i=a("b775");function e(s){return Object(i["a"])({url:"/purchase_order/getData",method:"get",params:s})}function r(s){return Object(i["a"])({url:"/purchase_order/getWaitForPurchaseOrderSupplier",method:"get",params:s})}function l(s){return Object(i["a"])({url:"/purchase_order/getDataInPurchaseMode",method:"get",params:s})}function n(s){return Object(i["a"])({url:"/purchase_order/updateData",method:"post",data:s})}function c(s){return Object(i["a"])({url:"/purchase_order/modifyData",method:"post",data:s})}function o(s){return Object(i["a"])({url:"/purchase_order/operationModifyData",method:"post",data:s})}function u(s){return Object(i["a"])({url:"/purchase_order/fillThePurchaseIdForPurchaseOrders",method:"post",data:s})}function d(s){return Object(i["a"])({url:"/purchase_order/fillThePurchaseIdForPurchaseOrder",method:"post",data:s})}function _(s){return Object(i["a"])({url:"/purchase_order/cancleThePurchaseOrder",method:"post",data:s})}function p(s){return Object(i["a"])({url:"/purchase_order/updatePurchaseOrdersIn1688WithAPI",method:"post",data:s})}function v(s){return Object(i["a"])({url:"/purchase_order/buyPurchaseProductIn1688WithAPI",method:"post",data:s})}function m(s){return Object(i["a"])({url:"/pic/upload",method:"post",data:s,headers:{"Content-Type":"multipart/form-data"}})}function C(s){return Object(i["a"])({url:"/purchase_product/getData",method:"get",params:s})}function f(s){return Object(i["a"])({url:"/purchase_product/addData",method:"post",data:s})}}}]);
//# sourceMappingURL=chunk-878ac49a.fa52af98.js.map