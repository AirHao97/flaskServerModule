{"version":3,"sources":["webpack:///./src/api/packer.js","webpack:///./src/views/packer/stock_in/index.vue?5471","webpack:///./src/views/packer/stock_in/index.vue","webpack:///src/views/packer/stock_in/index.vue","webpack:///./src/views/packer/stock_in/index.vue?3fa5","webpack:///./src/views/packer/stock_in/index.vue?ac92"],"names":["getInTransitPurchaseOrderData","params","request","url","method","getThePostingOfPurchaseOrder","data","signTheSystemProductsOfPurchaseOrder","getStockPreparedPendingOutwardOzonOrderData","getOrderForDispatch","stockOutPurchaseProductWithPurchaseProductId","getDataWithOzonOrderId","stockOutPurchaseProductInOzonOrder","checkOzonOrderWeight","labelTheOverWeightOzonOrder","uploadTheWeight","addPackage","printPackage","render","_vm","this","_c","_self","attrs","staticStyle","on","search","model","value","searchForm","keyWord","callback","$$v","$set","expression","_v","changeMode","_s","mode","ref","openFormModal","posting_number","_e","columns","items","loading","pagination","tableChange","scopedSlots","_u","key","fn","text","record","_l","JSON","parse","posting_numbers","postting_number","index","signed","system_product","system_sku","stock_quantity","omitted_quantity","in_transit_quantity","supplier_name","purchase_link","link","msg","targetItem","update","visible","staticRenderFns","name","components","FormModal","title","dataIndex","width","customRender","start","limit","status","purchase_platform","current","total","pageSize","form","watch","newValue","oldValue","list","computed","methods","initialize","then","count","finally","$nextTick","$refs","posting_number_input","focus","res","message","success","error","filters","sorter","mounted","activated","component"],"mappings":"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","file":"static/js/chunk-0e6eb2e0.d8fa9300.js","sourcesContent":["import request from '@/utils/request';\r\n\r\n// 打包获取所有的 状态为 运输中 的采购订单\r\nexport function getInTransitPurchaseOrderData(params) {\r\n  return request({ url: `/purchase_order/getInTransitPurchaseOrderData`, method: 'get', params })\r\n}\r\n\r\n// 管理员及打包 返回所有包含此运单号的采购单产品信息 \r\nexport function getThePostingOfPurchaseOrder(data) {\r\n  return request({ url: `/purchase_order/getThePostingOfPurchaseOrder`, method: 'post', data })\r\n}\r\n\r\n// 管理员及打包 入库包含此系统中产品的 采购单 并填写到货数量\r\nexport function signTheSystemProductsOfPurchaseOrder(data) {\r\n  return request({ url: `/purchase_order/signTheSystemProductsOfPurchaseOrder`, method: 'post', data })\r\n}\r\n\r\n// ----------------------------------------------------\r\n\r\n// 打包获取所有状态为 已备货待出库 的 ozon订单\r\nexport function getStockPreparedPendingOutwardOzonOrderData(params) {\r\n  return request({ url: `/ozon_order/getStockPreparedPendingOutwardOzonOrderData`, method: 'get', params })\r\n}\r\n\r\n// 计算获取所有可以进行打包的ozon订单\r\nexport function getOrderForDispatch(data) {\r\n  return request({ url: `/ozon_order/getOrderForDispatch`, method: 'post', data })\r\n}\r\n\r\n// 根据采购产品id 出库采购产品和订单 如果订单只包含这一个产品 直接出库 并打印单子  如果包含多个产品 显示剩余需要出库的产品\r\nexport function stockOutPurchaseProductWithPurchaseProductId(data) {\r\n  return request({ url: `/ozon_order/stockOutPurchaseProductWithPurchaseProductId`, method: 'post', data })\r\n}\r\n\r\n//根据id获取订单数据\r\nexport function getDataWithOzonOrderId(data) {\r\n  return request({ url: `/ozon_order/getDataWithOzonOrderId`, method: 'post', data })\r\n}\r\n\r\n// 根据采购产品id 出库采购产品和订单 如果订单只包含这一个产品 直接出库  如果包含多个产品 显示剩余需要出库的产品\r\nexport function stockOutPurchaseProductInOzonOrder(data) {\r\n  return request({ url: `/ozon_order/stockOutPurchaseProductInOzonOrder`, method: 'post', data })\r\n}\r\n\r\n// ----------------------------------------------------\r\n// 称重检查\r\nexport function checkOzonOrderWeight(data) {\r\n  return request({ url: `/ozon_order/checkOzonOrderWeight`, method: 'post', data })\r\n}\r\n// 异常订单上报运营\r\nexport function labelTheOverWeightOzonOrder(data) {\r\n  return request({ url: `/ozon_order/labelTheOverWeightOzonOrder`, method: 'post', data })\r\n}\r\n\r\n// 称重正常 绑定重量\r\nexport function uploadTheWeight(data) {\r\n  return request({ url: `/ozon_order/uploadTheWeight`, method: 'post', data })\r\n}\r\n\r\n\r\n// ----------------------------------------------------\r\n// 添加麻袋\r\nexport function addPackage(data) {\r\n  return request({ url: `/package/addData`, method: 'post', data })\r\n}\r\n\r\n// 打印麻袋标签\r\nexport function printPackage(data) {\r\n  return request({ url: `/package/printPackage`, method: 'post', data })\r\n}\r\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=62c73034&prod&scoped=true&lang=css\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('a-card',{attrs:{\"title\":\"采购订单入库管理\"}},[_c('a-row',{attrs:{\"gutter\":16}},[_c('a-col',{staticStyle:{\"max-width\":\"200px\",\"margin-bottom\":\"12px\"},attrs:{\"span\":24}},[_c('a-input',{attrs:{\"placeholder\":\"关键字查询..\",\"allowClear\":\"\"},on:{\"pressEnter\":_vm.search},model:{value:(_vm.searchForm.keyWord),callback:function ($$v) {_vm.$set(_vm.searchForm, \"keyWord\", $$v)},expression:\"searchForm.keyWord\"}})],1),_c('a-col',{staticStyle:{\"width\":\"100px\",\"margin-bottom\":\"12px\"},attrs:{\"span\":24}},[_c('a-button',{attrs:{\"type\":\"primary\",\"icon\":\"search\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")])],1),_c('a-col',{staticStyle:{\"width\":\"100px\",\"margin-bottom\":\"12px\"},attrs:{\"span\":24}},[_c('a-button',{attrs:{\"type\":\"primary\",\"icon\":\"search\"},on:{\"click\":_vm.changeMode}},[_vm._v(_vm._s(_vm.mode))])],1)],1),(_vm.mode == '关闭入库模式')?_c('a-row',{attrs:{\"gutter\":16}},[_c('a-col',{staticStyle:{\"width\":\"600px\",\"margin-bottom\":\"12px\"},attrs:{\"span\":24}},[_c('a-input',{ref:\"posting_number_input\",attrs:{\"placeholder\":\"运单号输入..\",\"allowClear\":\"\"},on:{\"pressEnter\":_vm.openFormModal},model:{value:(_vm.posting_number),callback:function ($$v) {_vm.posting_number=$$v},expression:\"posting_number\"}})],1),_c('a-col',{staticStyle:{\"width\":\"100px\",\"margin-bottom\":\"12px\"},attrs:{\"span\":24}},[_c('a-button',{attrs:{\"type\":\"primary\",\"icon\":\"search\"},on:{\"click\":_vm.openFormModal}},[_vm._v(\"确定\")])],1)],1):_vm._e(),_c('a-row',{staticStyle:{\"margin-top\":\"12px\"}},[_c('a-table',{attrs:{\"size\":\"small\",\"columns\":_vm.columns,\"dataSource\":_vm.items,\"rowKey\":\"id\",\"loading\":_vm.loading,\"pagination\":_vm.pagination},on:{\"change\":_vm.tableChange},scopedSlots:_vm._u([{key:\"posting_numbers\",fn:function(text, record){return _c('div',{},_vm._l((JSON.parse(record.posting_numbers)),function(postting_number,index){return _c('div',{key:index+100},[_c('span',{staticStyle:{\"font-weight\":\"700\"}},[_vm._v(_vm._s(index+1)+\".\")]),_c('span',{staticStyle:{\"color\":\"green\"}},[_vm._v(\" \"+_vm._s(postting_number.value)+\" \")]),_c('span',{staticStyle:{\"margin-left\":\"20px\",\"font-weight\":\"700\"}},[_vm._v(\"状态：\")]),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\" \"+_vm._s(postting_number.signed)+\" \")]),_c('hr',{staticStyle:{\"margin-top\":\"0\"}})])}),0)}},{key:\"system_product\",fn:function(text, record){return _c('div',{},[(record.system_product)?_c('div',[_c('span',[_vm._v(\" SKU: \")]),_vm._v(\" \"),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\" \"+_vm._s(record.system_product.system_sku)+\" \")]),_c('span',[_vm._v(\" 库存量: \")]),_vm._v(\" \"),_c('span',{staticStyle:{\"color\":\"green\"}},[_vm._v(_vm._s(record.system_product.stock_quantity))]),_c('span',[_vm._v(\" 缺货量: \")]),_vm._v(\" \"),_c('span',{staticStyle:{\"color\":\"green\"}},[_vm._v(_vm._s(record.system_product.omitted_quantity))]),_c('span',[_vm._v(\" 在途量: \")]),_vm._v(\" \"),_c('span',{staticStyle:{\"color\":\"green\"}},[_vm._v(_vm._s(record.system_product.in_transit_quantity))]),_c('span',[_vm._v(\" 供应商: \")]),_vm._v(\" \"),_c('span',{staticStyle:{\"color\":\"green\"}},[_vm._v(_vm._s(record.system_product.supplier_name))])]):_vm._e()])}},{key:\"system_product.purchase_link\",fn:function(text, record){return _c('div',{},[_c('div',_vm._l((JSON.parse(record.system_product.purchase_link)),function(link,index){return _c('div',{key:index+100},[_c('span',[_vm._v(_vm._s(index+1)+\"：\")]),_c('a',{attrs:{\"href\":link.link,\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(`链接${index+1}号`)+\" \")]),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\" \"+_vm._s(link.msg)+\" \")]),_c('hr')])}),0)])}}])})],1)],1),_c('form-modal',{attrs:{\"form\":_vm.targetItem,\"posting_number\":_vm.posting_number},on:{\"update\":_vm.update},model:{value:(_vm.visible),callback:function ($$v) {_vm.visible=$$v},expression:\"visible\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <a-card title=\"采购订单入库管理\">\r\n      <a-row :gutter=\"16\">\r\n        <a-col :span=\"24\" style=\"max-width: 200px; margin-bottom: 12px;\">\r\n          <a-input v-model=\"searchForm.keyWord\" placeholder=\"关键字查询..\" allowClear @pressEnter=\"search\" />\r\n        </a-col>\r\n\r\n        <a-col :span=\"24\" style=\"width: 100px; margin-bottom: 12px;\">\r\n          <a-button type=\"primary\" icon=\"search\" @click=\"search\">查询</a-button>\r\n        </a-col>\r\n\r\n        <a-col :span=\"24\" style=\"width: 100px; margin-bottom: 12px;\">\r\n          <a-button type=\"primary\" icon=\"search\" @click=\"changeMode\">{{mode}}</a-button>\r\n        </a-col>\r\n\r\n      </a-row>\r\n\r\n      <a-row :gutter=\"16\" v-if=\"mode == '关闭入库模式'\">\r\n        <a-col :span=\"24\" style=\"width: 600px; margin-bottom: 12px;\">\r\n          <a-input ref=\"posting_number_input\" v-model=\"posting_number\" placeholder=\"运单号输入..\" allowClear @pressEnter=\"openFormModal\" />\r\n        </a-col>\r\n\r\n        <a-col :span=\"24\" style=\"width: 100px; margin-bottom: 12px;\">\r\n          <a-button type=\"primary\" icon=\"search\" @click=\"openFormModal\">确定</a-button>\r\n        </a-col>\r\n      </a-row>\r\n\r\n\r\n      <a-row style=\"margin-top: 12px;\">\r\n        <a-table size=\"small\" :columns=\"columns\" :dataSource=\"items\" rowKey=\"id\" :loading=\"loading\" :pagination=\"pagination\" @change=\"tableChange\">\r\n          <div slot=\"posting_numbers\" slot-scope=\"text, record\">\r\n            <div v-for=\" postting_number,index in JSON.parse(record.posting_numbers)\" :key=\"index+100\">\r\n              <span style=\"font-weight: 700;\">{{ index+1 }}.</span>\r\n              <span style=\"color:green\"> {{ postting_number.value }} </span>\r\n              <span style=\"margin-left:20px; font-weight: 700;\">状态：</span>\r\n              <span style=\"color:red\"> {{ postting_number.signed }} </span>\r\n              <hr style=\"margin-top: 0;\">\r\n            </div>\r\n          </div>\r\n\r\n          <div slot=\"system_product\" slot-scope=\"text, record\">\r\n            <div v-if=\"record.system_product\">\r\n              <span> SKU: </span> <span style=\"color: red;\"> {{ record.system_product.system_sku }} </span> \r\n              <span> 库存量: </span> <span style=\"color: green;\">{{ record.system_product.stock_quantity }}</span> \r\n              <span> 缺货量: </span> <span style=\"color: green;\">{{ record.system_product.omitted_quantity }}</span> \r\n              <span> 在途量: </span> <span style=\"color: green;\">{{ record.system_product.in_transit_quantity }}</span>\r\n              <span> 供应商: </span> <span style=\"color: green;\">{{ record.system_product.supplier_name }}</span>  \r\n            </div>\r\n          </div>\r\n          \r\n          <div slot=\"system_product.purchase_link\" slot-scope=\"text, record\">\r\n            <div>\r\n              <div v-for=\" link,index in JSON.parse(record.system_product.purchase_link)\" :key=\"index+100\">\r\n                <span>{{ index+1 }}：</span>\r\n                <a :href=\"link.link\" target=\"_blank\"> {{ `链接${index+1}号` }} </a>\r\n                <span style=\"color:red\"> {{ link.msg }} </span>\r\n                <hr>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </a-table>\r\n      </a-row>\r\n    </a-card>\r\n    <form-modal v-model=\"visible\" :form=\"targetItem\" :posting_number = \"posting_number\" @update=\"update\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getInTransitPurchaseOrderData,getThePostingOfPurchaseOrder } from '@/api/packer'\r\nimport { message } from \"ant-design-vue\";\r\n\r\nexport default {\r\n  name: 'Warehouse',\r\n  components: {\r\n    FormModal: () => import('./FormModal.vue'),\r\n  },\r\n  data() {\r\n    return {\r\n      columns: [\r\n      {\r\n          title: '采购单ID',\r\n          dataIndex: 'id',\r\n          width: 150\r\n        },\r\n        {\r\n          title: '采购单号',\r\n          dataIndex: 'purchase_id',\r\n        },\r\n        {\r\n          title: '国内运单号',\r\n          dataIndex: 'posting_numbers',\r\n          scopedSlots: { customRender: 'posting_numbers' },\r\n          // width: 200\r\n        },\r\n        {\r\n          title: '待采购量',\r\n          dataIndex: 'wait_for_purchase_quantity',\r\n        },\r\n        {\r\n          title: '在篮量',\r\n          dataIndex: 'in_basket_quantity',\r\n        },\r\n        {\r\n          title: '在途量',\r\n          dataIndex: 'in_transit_quantity',\r\n        },\r\n        {\r\n          title: '库存量',\r\n          dataIndex: 'stock_quantity',\r\n        },\r\n        {\r\n          title: '出库量',\r\n          dataIndex: 'out_stock_quantity',\r\n        },\r\n        {\r\n          title: '丢失量',\r\n          dataIndex: 'loss_quantity',\r\n        },\r\n        {\r\n          title: '采购价格',\r\n          dataIndex: 'price',\r\n        },\r\n        {\r\n          title: '物流状态',\r\n          dataIndex: 'logistics_status',\r\n        },\r\n        {\r\n          title: '采购平台',\r\n          dataIndex: 'purchase_platform',\r\n        },\r\n        {\r\n          title: '采购状态',\r\n          dataIndex: 'status',\r\n        },\r\n        {\r\n          title: '是否异常',\r\n          dataIndex: 'is_error',\r\n          customRender: (value) => value?\"是\":\"否\",\r\n        },\r\n        {\r\n          title: '系统内商品',\r\n          dataIndex: 'system_product',\r\n          scopedSlots: { customRender: 'system_product' },\r\n        },\r\n        {\r\n          title: '采购链接',\r\n          dataIndex: 'system_product.purchase_link',\r\n          scopedSlots: { customRender: 'system_product.purchase_link' },\r\n          // width: 300,\r\n        },\r\n      ],\r\n      \r\n      searchForm: { start: 0, limit: 15, keyWord: \"\", status:\"全部\", purchase_platform:\"1688\", supplier_name:\"\"},\r\n      pagination: { current: 1, total: 0, pageSize: 15 },\r\n\r\n      loading: false,\r\n      items: [],\r\n\r\n      visible: false,\r\n      targetItem: {},\r\n      form: {},\r\n\r\n      mode : \"开启入库模式\",\r\n      posting_number:\"\",\r\n    };\r\n  },\r\n  watch:{\r\n    'searchForm.purchase_platform'(newValue,oldValue){\r\n      this.loading = true;\r\n      this.searchForm.start = 0\r\n      this.pagination.current = 1\r\n      this.list()\r\n    },\r\n    'searchForm.status'(newValue,oldValue){\r\n      this.loading = true;\r\n      this.searchForm.start = 0\r\n      this.pagination.current = 1\r\n      this.list()\r\n    },\r\n  },\r\n  computed: {\r\n  },\r\n  methods: {\r\n    initialize() {\r\n      this.list();\r\n    },\r\n    list() {\r\n      this.loading = true;\r\n      getInTransitPurchaseOrderData(this.searchForm).then(data => {\r\n        this.pagination.total = data.data.count;\r\n        this.items = data.data.data;\r\n      }).finally(() => {\r\n        this.loading = false;\r\n      });\r\n    },\r\n\r\n    update() {\r\n      this.visible = false\r\n      this.list();\r\n      if(this.mode == \"关闭入库模式\"){\r\n        this.$nextTick(() => {\r\n          this.$refs.posting_number_input.focus();\r\n        });\r\n      }\r\n    },\r\n\r\n    search() {\r\n      this.searchForm.start = 0;\r\n      this.pagination.current = 1;\r\n      this.list();\r\n    },\r\n\r\n    openFormModal() {\r\n      if(this.posting_number){\r\n        getThePostingOfPurchaseOrder({posting_number:this.posting_number}).then(\r\n          res => {\r\n            message.success(res.msg)\r\n            this.targetItem = res.data.data;\r\n            this.visible = true;\r\n          }\r\n        )\r\n      }else{\r\n        message.error(\"运单号不能为空！\")\r\n      }\r\n      \r\n    },\r\n\r\n    tableChange(pagination, filters, sorter) {      \r\n      this.searchForm.start = (pagination.current-1)*this.pagination.pageSize;\r\n      this.pagination.current = pagination.current;\r\n      this.list();\r\n    },\r\n    changeMode(){\r\n      if(this.mode == \"开启入库模式\"){\r\n        this.mode = \"关闭入库模式\"\r\n        this.$nextTick(() => {\r\n          this.$refs.posting_number_input.focus();\r\n        });\r\n      }else {\r\n        this.mode = \"开启入库模式\"\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initialize();\r\n  },\r\n  activated() {\r\n    this.initialize();\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.selected-supplier {\r\n  background-color: #40a9ff !important; /* 选中时的背景颜色 */\r\n  border-color: #40a9ff !important;\r\n  color: white !important;\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=62c73034&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=62c73034&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62c73034\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}