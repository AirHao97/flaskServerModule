(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74f87742"],{2006:function(t,e,r){"use strict";r.d(e,"d",(function(){return n})),r.d(e,"g",(function(){return o})),r.d(e,"j",(function(){return i})),r.d(e,"f",(function(){return s})),r.d(e,"e",(function(){return c})),r.d(e,"l",(function(){return d})),r.d(e,"c",(function(){return u})),r.d(e,"k",(function(){return l})),r.d(e,"b",(function(){return h})),r.d(e,"h",(function(){return p})),r.d(e,"m",(function(){return m})),r.d(e,"a",(function(){return f})),r.d(e,"i",(function(){return g}));var a=r("b775");function n(t){return Object(a["a"])({url:"/purchase_order/getInTransitPurchaseOrderData",method:"get",params:t})}function o(t){return Object(a["a"])({url:"/purchase_order/getThePostingOfPurchaseOrder",method:"post",data:t})}function i(t){return Object(a["a"])({url:"/purchase_order/signTheSystemProductsOfPurchaseOrder",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/ozon_order/getStockPreparedPendingOutwardOzonOrderData",method:"get",params:t})}function c(t){return Object(a["a"])({url:"/ozon_order/getOrderForDispatch",method:"post",data:t})}function d(t){return Object(a["a"])({url:"/ozon_order/stockOutPurchaseProductWithPurchaseProductId",method:"post",data:t})}function u(t){return Object(a["a"])({url:"/ozon_order/getDataWithOzonOrderId",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/ozon_order/stockOutPurchaseProductInOzonOrder",method:"post",data:t})}function h(t){return Object(a["a"])({url:"/ozon_order/checkOzonOrderWeight",method:"post",data:t})}function p(t){return Object(a["a"])({url:"/ozon_order/labelTheOverWeightOzonOrder",method:"post",data:t})}function m(t){return Object(a["a"])({url:"/ozon_order/uploadTheWeight",method:"post",data:t})}function f(t){return Object(a["a"])({url:"/package/addData",method:"post",data:t})}function g(t){return Object(a["a"])({url:"/package/printPackage",method:"post",data:t})}},ce6b:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("a-card",{attrs:{title:"ozon订单管理"}},[e("a-row",{attrs:{gutter:16}},[e("a-col",{staticStyle:{"max-width":"200px","margin-bottom":"12px"},attrs:{span:24}},[e("a-input",{attrs:{placeholder:"关键字查询..",allowClear:""},on:{pressEnter:t.search},model:{value:t.searchForm.keyWord,callback:function(e){t.$set(t.searchForm,"keyWord",e)},expression:"searchForm.keyWord"}})],1),e("a-col",{staticStyle:{width:"100px","margin-bottom":"12px"},attrs:{span:24}},[e("a-button",{attrs:{type:"primary",icon:"search"},on:{click:t.search}},[t._v("查询")])],1),e("a-col",{staticStyle:{width:"100px","margin-bottom":"12px","margin-right":"70px"},attrs:{span:24}},[e("a-button",{attrs:{type:"primary",icon:"edit"},on:{click:t.calculateCanBeStockOutOzonOrder}},[t._v("计算可出库订单")])],1),e("a-col",{staticStyle:{width:"100px","margin-bottom":"12px","margin-right":"70px"},attrs:{span:24}},[e("a-button",{attrs:{type:"primary",icon:"search"},on:{click:t.changeMode}},[t._v(t._s(t.mode))])],1),e("a-col",{staticStyle:{width:"100px","margin-bottom":"12px"},attrs:{span:24}},[e("a-button",{attrs:{type:"primary",icon:"search"},on:{click:t.openCheckWeightForm}},[t._v("称重检查")])],1)],1),"关闭出库模式"==t.mode?e("a-row",{attrs:{gutter:16}},[e("a-col",{staticStyle:{width:"400px","margin-bottom":"12px"},attrs:{span:24}},[e("a-input",{ref:"purchase_product_id",attrs:{placeholder:"采购商品输入..",allowClear:""},on:{pressEnter:t.openFormModal},model:{value:t.purchase_product_id,callback:function(e){t.purchase_product_id=e},expression:"purchase_product_id"}})],1),e("a-col",{staticStyle:{width:"100px","margin-bottom":"12px"},attrs:{span:24}},[e("a-button",{attrs:{type:"primary",icon:"search"},on:{click:t.openFormModal}},[t._v("确定")])],1)],1):t._e(),e("a-row",{staticStyle:{"margin-top":"12px"}},[e("a-table",{attrs:{size:"small",columns:t.columns,dataSource:t.items,rowKey:"id",loading:t.loading,pagination:t.pagination},on:{change:t.tableChange},scopedSlots:t._u([{key:"is_active",fn:function(r){return e("div",{},[e("a-tag",{attrs:{color:r?"green":"red"}},[t._v(t._s(r?"激活":"冻结"))])],1)}},{key:"products",fn:function(r,a){return e("div",{},t._l(a.products,(function(r,a){return e("div",{key:a+100,staticStyle:{display:"flex"}},[e("span",[t._v(" "+t._s(a+1)+". ")]),e("span",[t._v(" offer_id: ")]),t._v(" "),e("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(r.offer_id)+" ")]),e("span",[t._v(" 数量: ")]),t._v(" "),e("span",{staticStyle:{color:"skyblue"}},[t._v(t._s(r.quantity))]),e("div",{staticStyle:{display:"flex","flex-direction":"column","margin-left":"20px"}},t._l(r.system_products,(function(r){return e("div",{key:r.id},[e("span",[t._v(" 系统内sku: ")]),e("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(r.system_sku)+" ")])])})),0),e("hr")])})),0)}}])})],1)],1),e("form-modal",{attrs:{form:t.targetItem,package_sku:t.package_sku},on:{update:t.update},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}}),e("CheckWeightFormModal",{attrs:{form:t.targetItem},on:{update:t.update},model:{value:t.checkWeightVisible,callback:function(e){t.checkWeightVisible=e},expression:"checkWeightVisible"}})],1)},n=[],o=(r("14d9"),r("2c667"),r("249d"),r("40e9"),r("907a"),r("986a"),r("1d02"),r("3c5d"),r("6ce5"),r("2834"),r("4ea1"),r("b7ef"),r("88a7"),r("271a"),r("5494"),r("c1df")),i=r.n(o),s=r("2006"),c=r("f64c"),d={name:"OzonOrder",components:{FormModal:()=>r.e("chunk-6c4fb2be").then(r.bind(null,"2218")),CheckWeightFormModal:()=>r.e("chunk-fbb833ce").then(r.bind(null,"2a9e"))},data(){return{columns:[{title:"订单ID",dataIndex:"order_id"},{title:"货件号",dataIndex:"posting_number",key:"posting_number",width:"145px"},{title:"国际运单号",dataIndex:"tracking_number",key:"tracking_number",width:"145px"},{title:"系统状态",dataIndex:"system_status"},{title:"开始处理时间",dataIndex:"in_process_at",customRender:(t,e,r)=>i()(t).format("YYYY-MM-DD HH:mm:ss")},{title:"必须收取时间",dataIndex:"shipment_date",customRender:(t,e,r)=>i()(t).format("YYYY-MM-DD HH:mm:ss")},{title:"产品",dataIndex:"products",scopedSlots:{customRender:"products"}}],searchForm:{start:0,limit:15,keyWord:"",system_status:""},pagination:{current:1,total:0,pageSize:15},loading:!1,items:[],visible:!1,checkWeightVisible:!1,targetItem:{},form:{},importLoading:!1,mode:"开启出库模式",purchase_product_id:"",iframe:!1}},computed:{},methods:{initialize(){this.list()},list(){this.loading=!0,Object(s["f"])(this.searchForm).then(t=>{this.pagination.total=t.data.count,this.items=t.data.data}).finally(()=>{this.loading=!1})},update(){this.visible=!1,this.checkWeightVisible=!1,this.list()},search(){this.searchForm.start=0,this.pagination.current=1,this.list()},openFormModal(){this.purchase_product_id?Object(s["l"])({purchase_product_id:this.purchase_product_id}).then(t=>{if("组合订单"==t.type)c["a"].success(t.msg),this.targetItem=t.data,this.visible=!0;else{const r=t.data,a=e(r),n=URL.createObjectURL(a);0==this.iframe&&(this.iframe=document.createElement("iframe"),document.body.appendChild(this.iframe));let o=this.iframe;function e(t){const e=atob(t),r=[];for(let a=0;a<e.length;a+=1024){const t=e.slice(a,a+1024),n=new Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);r.push(new Uint8Array(n))}return new Blob(r,{type:"application/pdf"})}o.style.display="none",o.src=n,o.onload=()=>{o.contentWindow.focus(),o.contentWindow.print(),c["a"].success(t.msg),this.search(),this.$nextTick(()=>{this.$refs.purchase_product_id.focus()})}}}):c["a"].error("入库采购商品id不能为空！")},tableChange(t,e,r){this.searchForm.start=(t.current-1)*this.pagination.pageSize,this.pagination.current=t.current,this.list()},changeMode(){"开启出库模式"==this.mode?(this.mode="关闭出库模式",this.$nextTick(()=>{this.$refs.purchase_product_id.focus()})):this.mode="开启出库模式"},calculateCanBeStockOutOzonOrder(){Object(s["e"])().then(t=>{c["a"].success(t.msg),this.search()})},openCheckWeightForm(){this.targetItem={},this.checkWeightVisible=!0}},mounted(){this.initialize()},activated(){this.initialize()}},u=d,l=r("2877"),h=Object(l["a"])(u,a,n,!1,null,null,null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-74f87742.afab3e7f.js.map